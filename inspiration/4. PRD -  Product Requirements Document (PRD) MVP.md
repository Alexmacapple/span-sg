
## Architecture Modulaire SPAN SG - MkDocs avec Checklist Officielle

**Version** : 3.0  
**Date** : 30 septembre 2025  
**Owner** : Alexandra  
**Validateurs** : Bertrand, Alex  
**Sponsor** : Yves (validation production uniquement)

---

## 1. Objectif

Créer un **framework simple et modulaire** pour le SPAN SG permettant :
- Édition décentralisée par service
- Agrégation automatique niveau SG  
- Versioning complet
- Export HTML/PDF
- **Scoring automatique basé sur la checklist officielle DINUM (31 points)**

**Principe directeur** : "Simple, fonctionnel et efficace. Pas une usine à gaz."

---

## 2. Architecture Simplifiée

### 2.1 Structure Pyramidale

```
Niveau 1 : SPAN SG (Global)
    ├── Niveau 2 : Modules Services (SNUM, SIRCOM, SRH...)
    │   └── Niveau 3 : Détails par service
    └── (Futur) Extensions autres directions
```

### 2.2 Structure des Fichiers

```
span-sg/
├── mkdocs.yml                 # Config principale
├── mkdocs-pdf.yml             # Config export PDF
├── docker-compose.yml         # Containerisation
├── .github/
│   └── workflows/
│       └── build.yml          # GitHub Actions
│
├── docs/
│   ├── index.md              # SPAN SG Global
│   ├── synthese.md           # Vue consolidée (généré auto)
│   │
│   ├── modules/              # Niveau 2 - Services
│   │   ├── _template.md      # Modèle obligatoire
│   │   ├── snum.md
│   │   ├── sircom.md
│   │   ├── srh.md
│   │   ├── siep.md
│   │   ├── safi.md
│   │   └── bgs.md
│   │
│   └── assets/
│       └── custom.css        # Styles minimaux
│
├── scripts/                   # Scripts d'automatisation
│   └── calculate_scores.py   # Calcul automatique des scores
│
├── exports/                   # Générés (non versionnés)
│   └── span-sg.pdf
│
└── site/                      # Site généré (non versionné)
```

### 2.3 Template Module Obligatoire

**Template basé sur la checklist officielle SPAN - 31 points de contrôle**

```markdown
# SPAN [SERVICE] - Schéma Pluriannuel d'Accessibilité Numérique

**Période** : 2025-2027  
**Score global** : [X/31] questions validées ([XX]%)  
**Dernière mise à jour** : [DATE]

## 1. Stratégie et politique

- [ ] La stratégie numérique intègre l'accessibilité comme composante essentielle
  - État : [Non démarré/En cours/Réalisé]
  - Actions : [...]
  - Échéance : [...]

- [ ] La politique promeut l'intégration des personnes en situation de handicap
  - État : [...]
  - Actions : [...]

## 2. Référent accessibilité numérique

- [ ] Un référent accessibilité numérique est désigné
  - Nom : [...]
  - % temps dédié : [...]
  
- [ ] Les missions du référent sont clairement définies
  - Fiche de poste : [Oui/Non]
  - Périmètre : [...]

## 3. Ressources humaines et financières

- [ ] Les ressources humaines dédiées sont identifiées
  - Effectifs : [X ETP]
  
- [ ] Les ressources financières sont allouées
  - Budget 2025 : [...]€
  - Budget 2026 : [...]€
  - Budget 2027 : [...]€

## 4. Compétences et recrutement

- [ ] Les compétences accessibilité sont dans les fiches de poste
  - Postes concernés : [...]
  
- [ ] Le recrutement prend en compte les compétences accessibilité
  - Grille évaluation : [Oui/Non]

## 5. Formation et sensibilisation

- [ ] Des formations accessibilité sont planifiées
  - Agents à former : [X]
  - Planning : [...]
  
- [ ] La sensibilisation est intégrée aux programmes
  - Sessions/an : [X]

## 6. Moyens techniques et expertises

- [ ] Les moyens techniques de test sont en place
  - Outils : [...]
  
- [ ] Appel à expertises externes si nécessaire
  - Prestataires : [...]
  - Budget : [...]€

## 7. Organisation interne et contrôle

- [ ] L'organisation soutient l'accessibilité
  - Comité dédié : [Oui/Non]
  - Process définis : [Oui/Non]
  
- [ ] Des modalités de contrôle sont établies
  - Fréquence audits : [...]

## 8. Clauses contractuelles

- [ ] L'accessibilité est dans les clauses contractuelles
  - Marchés concernés : X/Y
  
- [ ] Les critères de sélection intègrent l'accessibilité
  - Pondération : [X]%

## 9. Mise en conformité et suivi

- [ ] Les nouveaux projets intègrent l'accessibilité dès la conception
  - Process défini : [Oui/Non]
  
- [ ] Les tests incluent des personnes handicapées
  - Panel testeurs : [Oui/Non]
  
- [ ] Des évaluations sont prévues pour tous les services
  - Planning : [...]
  - Services audités : X/Y
  
- [ ] Un calendrier de corrections est établi
  - Actions prioritaires : [...]

## 10. Mesures supplémentaires

- [ ] Accès en langue des signes (vidéos)
- [ ] Traduction en langage simplifié (FALC)
- [ ] Critères AAA pris en compte

## 11. Bilan et plans d'actions

- [ ] Bilan annuel réalisé
  - Dernier bilan : [DATE]
  
- [ ] Plans publiés en ligne (format accessible)
  - URL : [...]

## Périmètre du service

| Type | Total | Audités | Conformes | Score |
|------|-------|---------|-----------|-------|
| Sites web | | | | % |
| Intranets | | | | % |
| Applications | | | | % |

## Plan d'actions prioritaires 2025

| Action | Échéance | Responsable | Budget | Statut |
|--------|----------|-------------|--------|--------|
| | T1 2025 | | € | |
| | T2 2025 | | € | |

---
*Dernière mise à jour : [date]*
```

---

## 3. Configuration Technique Minimale

### 3.1 MkDocs Config

```yaml
# mkdocs.yml
site_name: SPAN SG
site_url: https://[à définir].github.io/span-sg/
repo_url: https://github.com/[organisation]/span-sg

theme:
  name: material
  language: fr
  features:
    - navigation.tabs
    - navigation.sections
    - toc.integrate

plugins:
  - search:
      lang: fr
  - pdf-export:
      combined: true
      combined_output_path: exports/span-sg.pdf

nav:
  - Accueil: index.md
  - Synthèse: synthese.md
  - Modules Services:
    - SNUM: modules/snum.md
    - SIRCOM: modules/sircom.md
    - SRH: modules/srh.md
    - SIEP: modules/siep.md
    - SAFI: modules/safi.md
    - BGS: modules/bgs.md

markdown_extensions:
  - tables
  - toc:
      permalink: true
```

### 3.2 Script de Calcul des Scores

**`scripts/calculate_scores.py` - Génération automatique de la synthèse**

```python
#!/usr/bin/env python3
"""Calcul automatique des scores SPAN basé sur les checkboxes"""

import re
from pathlib import Path
from datetime import datetime

def calculate_module_score(module_path):
    """Calcule le score d'un module"""
    with open(module_path, 'r', encoding='utf-8') as f:
        content = f.read()
    
    total = content.count('- [ ]') + content.count('- [x]')
    checked = content.count('- [x]')
    
    return checked, total, round((checked/total)*100, 1) if total > 0 else 0

def generate_summary():
    """Génère le tableau de synthèse"""
    modules_dir = Path("docs/modules")
    summary = ["# Tableau de bord SPAN SG\n"]
    summary.append(f"*Mis à jour le {datetime.now().strftime('%d/%m/%Y')}*\n")
    summary.append("| Service | Score | Statut |")
    summary.append("|---------|-------|--------|")
    
    total_checked = 0
    total_items = 0
    
    for module in sorted(modules_dir.glob("*.md")):
        if module.name.startswith("_"):
            continue
            
        checked, total, pct = calculate_module_score(module)
        total_checked += checked
        total_items += total
        
        status = "✓ Conforme" if pct >= 75 else "En cours"
        summary.append(f"| {module.stem.upper()} | {checked}/{total} ({pct}%) | {status} |")
    
    global_pct = round((total_checked/total_items)*100, 1) if total_items > 0 else 0
    summary.append(f"| **TOTAL** | **{total_checked}/{total_items} ({global_pct}%)** | **Global** |")
    
    # Sauvegarder
    with open("docs/synthese.md", 'w') as f:
        f.write('\n'.join(summary))
    
    print(f"Score global: {global_pct}%")
    return 0 if global_pct >= 25 else 1  # Exit code pour CI/CD

if __name__ == "__main__":
    exit(generate_summary())
```

### 3.3 Docker Setup

```dockerfile
# Dockerfile
FROM squidfunk/mkdocs-material:latest

WORKDIR /docs

RUN pip install mkdocs-pdf-export-plugin

EXPOSE 8000

CMD ["mkdocs", "serve", "--dev-addr=0.0.0.0:8000"]
```

```yaml
# docker-compose.yml
version: '3'
services:
  mkdocs:
    build: .
    volumes:
      - .:/docs
    ports:
      - "8000:8000"
```

### 3.3 GitHub Actions Simple

```yaml
# .github/workflows/build.yml
name: Build SPAN

on:
  push:
    branches: [main, draft]
  pull_request:
    branches: [main]

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Setup Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
    
    - name: Install dependencies
      run: |
        pip install mkdocs-material
        pip install mkdocs-pdf-export-plugin
    
    - name: Build site
      run: mkdocs build
    
    - name: Calculate SPAN scores
      run: |
        python scripts/calculate_scores.py
        echo "Scores calculés et synthèse générée"
    
    - name: Generate PDF
      run: mkdocs build --config-file mkdocs-pdf.yml
    
    - name: Upload artifacts
      uses: actions/upload-artifact@v3
      with:
        name: span-site
        path: |
          site/
          exports/

  deploy:
    if: github.ref == 'refs/heads/main'
    needs: build
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Deploy to GitHub Pages
      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: ./site
```

---

## 4. Workflow Git Simplifié

### 4.1 Branches

```
main     → Version publiée (production)
draft    → Version de travail (preview)
feature/ → Modifications par service
```

### 4.2 Process de Validation

1. **Service** crée branche `feature/update-[service]`
2. **Service** modifie son module
3. **Service** ouvre Pull Request vers `draft`
4. **Bertrand/Alex** review et merge vers `draft`
5. **Preview** automatique sur GitHub Pages (branch draft)
6. Quand prêt : PR de `draft` vers `main`
7. **Yves** valide pour production
8. **Tag** de version (v1.0.0, v1.1.0...)

### 4.3 Gestion des Urgences

Pour corrections rapides :
- Branche `hotfix/` directement vers `main`
- Review accélérée par Bertrand ou Alex
- Merge immédiat si critique

---

## 5. Plan de Mise en Œuvre

### Semaine 1 : Setup
- [ ] Créer repo GitHub privé
- [ ] Setup Docker local
- [ ] Configuration MkDocs de base
- [ ] Adapter template avec checklist officielle (31 points)
- [ ] Tester script de scoring automatique
- [ ] Import module SIRCOM existant

### Semaine 2 : Automatisation
- [ ] GitHub Actions
- [ ] Génération PDF automatique
- [ ] GitHub Pages (preview)
- [ ] Documentation contributeur

### Semaine 3 : Onboarding Services
- [ ] Création modules vides
- [ ] Formation Git basique (2h)
- [ ] Guide contribution (1 page)
- [ ] Premiers contenus

### Semaine 4 : Production
- [ ] Review contenus
- [ ] Validation Yves
- [ ] Tag v1.0.0
- [ ] Publication

---

## 6. Authentification et Accès

### 6.1 GitHub
- Repository privé
- Accès nominatifs :
  - Admin : Alexandra, Bertrand, Alex
  - Write : Référents services
  - Read : Équipes élargies

### 6.2 Consultation
- **Draft** : GitHub Pages avec auth basique
- **Production** : 
  - Option 1 : Intranet avec auth SSO
  - Option 2 : GitHub Pages avec protection

### 6.3 Credentials Génériques
```
Preview : span-preview / [mot de passe]
Production : span-prod / [mot de passe]
```

---

## 7. Comparaison de Versions

### 7.1 Via Git
```bash
# Comparer deux versions
git diff v1.0.0 v1.1.0 docs/

# Voir l'historique d'un module
git log docs/modules/snum.md

# Revenir à une version
git checkout v1.0.0
```

### 7.2 Interface GitHub
- Onglet "Releases" pour voir les versions
- Compare entre tags
- Historique par fichier

---

## 8. Guide Contributeur (1 page)

### Pour modifier votre module :

#### Option A : Interface Web GitHub (Recommandé pour débutants)

**Solution immédiate sans installation :**
1. Aller sur github.com/[org]/span-sg
2. Naviguer vers `docs/modules/[votre-service].md`
3. Cliquer sur l'icône crayon "Edit file"
4. Cocher/décocher les checkboxes directement
5. En bas : "Commit changes" avec message descriptif
6. Créer Pull Request vers `draft`

**Note** : Guide visuel détaillé disponible (nice to have, non prioritaire MVP)

#### Option B : Git Local (Pour utilisateurs avancés)

1. **Cloner le repo**
```bash
git clone https://github.com/[org]/span-sg
cd span-sg
```

2. **Créer une branche**
```bash
git checkout -b feature/update-snum
```

3. **Modifier votre module**
```bash
# Éditer docs/modules/snum.md
# Respecter le template
```

4. **Tester localement**
```bash
docker-compose up
# Ouvrir http://localhost:8000
```

5. **Commiter et pusher**
```bash
git add docs/modules/snum.md
git commit -m "Update SNUM: ajout plan 2025"
git push origin feature/update-snum
```

6. **Créer Pull Request**
- Aller sur GitHub
- "New Pull Request" vers `draft`
- Attendre validation

### État actuel des contributeurs

- **Référents identifiés** : Non, en cours
- **Niveau technique** : Hétérogène (seuls Bertrand et Alex maîtrisent Git)
- **Formation Git** : Pas nécessaire pour MVP (interface web suffisante)

---

## 9. Maintenance Minimale

### Hebdomadaire
- Review des Pull Requests
- Merge vers draft
- **Calcul automatique des scores** (`python scripts/calculate_scores.py`)
- Test preview

### Mensuelle  
- Merge draft → main (si prêt)
- Tag de version
- Export PDF pour archives
- **Vérification cohérence scores** (31 points par module)

### Trimestrielle
- Mise à jour dépendances
- Review globale cohérence
- **Analyse progression scores** (évolution par service)

---

## 10. Points d'Attention

### Avantages de la checklist officielle (31 points)

**Conformité réglementaire**
- Alignement sur les attendus DINUM
- Couverture complète des 7 critères obligatoires
- Format reconnu par les autorités de contrôle

**Mesure objective**
- Score calculé automatiquement (pas de subjectivité)
- Comparaison facilitée entre services
- Progression visible dans le temps

**Facilité d'usage**
- Checkboxes simples à cocher
- Questions claires et précises
- Pas d'interprétation nécessaire

### Ce qu'on NE fait PAS (MVP)
- Dashboard automatique
- API/Intégrations
- Notifications
- Signature électronique
- Multi-tenant
- Métriques temps réel

### Ce qu'on FAIT
- Markdown simple
- Git pour versioning
- Build automatique
- Export PDF
- Preview/Production
- Structure modulaire

---

## 10.1 Décisions et Hypothèses du MVP

### Décisions assumées

**Workflow simplifié**
- Alexandra et Bertrand valident ensemble (pas d'arbitrage nécessaire)
- Équipe soudée, direction commune
- Process allégé adapté à une petite équipe

**Intégration différée**
- Pas de pont avec l'outil de Bertrand (dashboard non finalisé)
- Import manuel volontaire pour le MVP
- Human-in-the-loop pour consolidation

**Adoption Git progressive**
- MVP : Alexandra et Bertrand éditent principalement
- Court terme : Interface web GitHub pour les autres
- Moyen terme : Formation si nécessaire
- Documentation minimale suffisante pour démarrer

### Hypothèses validées

- Référents services pas encore tous identifiés → OK pour MVP
- Niveau technique hétérogène → Géré par interface web
- SPAN existants (SG, SIRCOM) disponibles en PDF → À mapper sur checklist
- Horizon 3 ans pour extension → Cohérent avec cycle SPAN
- Budget formation à définir → Pas bloquant pour MVP

### Points reportés post-MVP

1. Interface utilisateur avancée
2. Intégration automatique dashboard Bertrand  
3. Formation Git approfondie
4. Extension aux autres directions
5. Automatisation complète des métriques

---

## 11. Évolution Progressive

### Phase 1 (MVP - Maintenant)
- 6 services de base
- Sites web et intranets uniquement
- Process manuel pour les métriques
- Contributeurs : Alexandra et Bertrand principalement

### Phase 2 (Maturité +6 mois)
- Applications métiers
- Autres services SG
- Semi-automatisation métriques
- Formation référents identifiés

### Phase 3 (Maturité +1 an)
- Tous services SG embarqués
- Automatisations avancées
- Interface simplifiée pour non-techniques

### Phase 4 (Horizon 3 ans - Durée de vie du SPAN)
- Extension aux autres directions (DGFIP, Douanes, etc.)
- Architecture multi-tenant
- Outillage complet
- Écosystème mature

**Note** : Le SPAN a une durée de vie de 3 ans (2025-2027), alignée sur l'obligation réglementaire de renouvellement triennal.

---

## 12. Contacts

| Rôle | Nom | GitHub |
|------|-----|--------|
| Owner | Alexandra | @alexandra |
| Validateur | Bertrand | @bertrand |
| Validateur | Alex | @alex |
| Sponsor | Yves | - |

---

## 13. Évolution du PRD - Changements v3

### Amélioration principale : Checklist officielle SPAN

**Version initiale (v1)** : 5 sections libres
**Version actuelle (v3)** : 31 points de contrôle standardisés

### Nouveautés v3

1. **Template basé sur la checklist officielle DINUM**
   - 31 questions précises réparties en 11 catégories
   - Format checkbox pour suivi visuel
   - Questions alignées sur les obligations légales

2. **Scoring automatique**
   - Script Python `calculate_scores.py`
   - Génération automatique de `synthese.md`
   - Score par service et score global SG
   - Intégré dans GitHub Actions

3. **Conformité garantie**
   - Utilisation du référentiel officiel
   - Comparabilité entre services
   - Évolution mesurable dans le temps

### Impact sur le workflow

- **Contributeurs** : Cochent simplement les cases
- **Validation** : Score objectif visible immédiatement  
- **Yves** : Dashboard de synthèse automatique
- **Conformité** : Format reconnu par les autorités

---

## Décision : GO/NO-GO

- [ ] Architecture v3 validée (avec checklist)
- [ ] Repository créé
- [ ] Accès configurés  
- [ ] Template checklist approuvé
- [ ] Script de scoring testé
- [ ] Planning accepté

**Signature Alexandra** : ___________  
**Signature Bertrand** : ___________  
**Signature Alex** : ___________  

---

*PRD v3.0 avec Checklist Officielle - 30 septembre 2025*  
*Principe : Simple, fonctionnel, efficace, CONFORME*

---
**Recommandation** : GO pour lancement immédiat

## **Prochaines étapes critiques :**

1. Créer le repo GitHub (jour 1)
2. Mapper les SPAN existants sur la checklist (semaine 1)
3. Tester le workflow avec un module pilote (semaine 1)
4. Former Alexandra sur MkDocs si nécessaire (semaine 1)
---
portail pro
span

---
En analysant votre PRD v3 à la lumière du cours SPAN Harmonie, je constate que vous avez déjà une base solide avec la checklist DINUM de 31 points. Voici les éléments qui pourraient enrichir votre architecture :

## **Points manquants ou à renforcer dans le PRD**

### 1. **Cadre légal et sanctions**

Le PRD ne mentionne pas :

- Les références légales (Article 47 de la loi handicap)
- Les modalités de contrôle par l'Arcom et le rapporteur du Conseil d'État
- Les risques de sanctions et leur processus
- La notion de "charge disproportionnée" et ses limites

### 2. **Indicateurs de performance étendus**

Au-delà du scoring sur 31 points, le cours suggère des KPIs plus diversifiés :

- **Financiers** : Taux d'exécution budgétaire accessibilité
- **Contractuels** : % de marchés avec clauses accessibilité
- **RH** : Taux de formation par population cible
- **UX** : Nombre de tests avec personnes handicapées
- **Satisfaction** : Enquêtes auprès des utilisateurs handicapés
- **Couverture** : % du parc audité vs total services

### 3. **Types d'audits différenciés**

Le PRD parle d'audits mais ne distingue pas :

- Audits de conformité complets (pour déclaration)
- Diagnostics partiels (pour priorisation)
- Audits d'accompagnement (pour remédiation ciblée)
- Audits croisés internes

### 4. **Gestion du périmètre et priorisation**

Manque une méthodologie de tri des services :

- Services les plus consultés
- Services spécifiques aux personnes handicapées
- Services en refonte prochaine
- Services à décommissionner
- Coût de correction estimé

### 5. **Publication et transparence**

Le PRD devrait préciser :

- Obligation de publication en ligne du SPAN et plans annuels
- Format accessible obligatoire
- Liens depuis les déclarations d'accessibilité
- Bilans annuels publics même en cas d'échec

### 6. **Tests utilisateurs inclusifs**

Section 9 du template mentionne les tests mais sans détail sur :

- Constitution du panel de testeurs handicapés
- Modalités de recrutement
- Compensation financière
- Protocoles de test adaptés

### 7. **Mesures correctives et calendrier**

Ajouter dans le template :

- Méthodologie de priorisation des corrections
- Budget par action corrective
- Responsable par action
- Statuts détaillés (À commencer/En cours/Réalisé/Reporté/Abandonné)

### 8. **Formation différenciée**

Préciser les niveaux de formation :

- Sensibilisation générale (tous)
- Formation métier (dev, UX, rédacteurs)
- Expertise approfondie (référents)
- Certification éventuelle

### 9. **Gouvernance et circuit de validation**

Clarifier :

- Rôle de la Direction dans la validation (pas juste Yves)
- Mandat officiel du RAN
- Comité de pilotage accessibilité
- Fréquence des revues

### 10. **Outillage et limitations**

Ajouter une section sur :

- Outils de test automatisés (limite 30% des critères)
- Position sur les surcouches d'accessibilité
- Outils de monitoring continu
- Tableau de bord temps réel vs reporting

## **Suggestions d'amélioration du workflow Git**

### Process de validation enrichi

- **Validation technique** : Tests automatisés sur les scores
- **Validation métier** : Cohérence avec stratégie globale
- **Validation budgétaire** : Alignement ressources/ambitions
- **Validation juridique** : Conformité réglementaire

### Dashboard de pilotage

Au-delà de la synthèse markdown :

- Vue comparative temporelle (progression)
- Alertes sur objectifs non atteints
- Projection de conformité à 3 ans
- Benchmark inter-services

## **Template module enrichi**

Ajouter dans chaque module :

```markdown
## Indicateurs complémentaires
- Tests utilisateurs réalisés : [X/Y prévus]
- Budget consommé : [X€/Y€ alloués] ([%])
- Formations dispensées : [X agents/Y ciblés]
- Réclamations traitées : [X/Y reçues]

## Risques et points de vigilance
- [Liste des risques identifiés]
- [Actions de mitigation]

## Décisions de charge disproportionnée
- [Service/fonctionnalité concernée]
- [Justification documentée]
- [Alternative proposée]
```

Cette approche renforcerait la conformité réglementaire tout en gardant la simplicité du système MkDocs.

----


